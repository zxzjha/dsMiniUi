{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?c5ca","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?5ae0","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?3671","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?69fe","uni-app:///page_testCarOverview/testCarOverview/testCarOverview.vue","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?118f","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?3f57"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","qiunDataCharts","comHocTouchbox","uDatetimePicker","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","m0","_self","_c","touchboxShow","timePickerShow","Number","Date","_isMounted","e0","$event","totalItemShow","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":"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","file":"page_testCarOverview/testCarOverview/testCarOverview.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './page_testCarOverview/testCarOverview/testCarOverview.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./testCarOverview.vue?vue&type=template&id=7128c49e&scoped=true&\"\nvar renderjs\nimport script from \"./testCarOverview.vue?vue&type=script&lang=js&\"\nexport * from \"./testCarOverview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./testCarOverview.vue?vue&type=style&index=0&id=7128c49e&lang=scss&scoped=true&\"\nimport style1 from \"./testCarOverview.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7128c49e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"page_testCarOverview/testCarOverview/testCarOverview.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=template&id=7128c49e&scoped=true&\"","var components\ntry {\n  components = {\n    qiunDataCharts: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts\" */ \"@/uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts.vue\"\n      )\n    },\n    comHocTouchbox: function() {\n      return import(\n        /* webpackChunkName: \"components/com-hoc-touchbox\" */ \"@/components/com-hoc-touchbox.vue\"\n      )\n    },\n    uDatetimePicker: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker\" */ \"@/uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.touchboxShow && _vm.timePickerShow ? Number(new Date()) : null\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.totalItemShow = true\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"page-test-car-overview\">\n\t\t<view class=\"map-wrapper\">\n\t\t\t<map class=\"map-item\" id=\"map\" :subkey=\"subkey\" layer-style=\"2\" :latitude=\"latitude\"\n\t\t\t\t:longitude=\"longitude\" :scale=\"8\" :show-location=\"true\" :enable-overlooking=\"true\"\n\t\t\t\t@regionchange=\"debounceRegionchange\" @updated=\"updated\" @markertap=\"onMarkerTap\"\n\t\t\t>\n\t\t\t\t<view class=\"car-arcbar-box\" style=\"width:120rpx;height:120rpx;\">\n\t\t\t\t\t<qiun-data-charts type=\"arcbar\" :canvas2d=\"true\" canvasId=\"circleDataColumn1\"\n\t\t\t\t\t:disableScroll=\"true\" :chartData=\"circleData\" :opts=\"arcbaropts\"\n\t\t\t\t\t@complete=\"totalItemShow=true\" :loadingType=\"0\"\n\t\t\t\t\t></qiun-data-charts>\n\t\t\t\t\t<view v-if=\"totalItemShow\" class=\"total-item\">共 {{total||'--'}} 辆</view>\n\t\t\t\t\t<view v-if=\"totalItemShow\" class=\"change-marker-box\">\n\t\t\t\t\t\t<text v-if=\"curMarkerType=='all'\" class=\"custom-icon touch-icon-style\" @click=\"showOnline('zaixixan')\">&#xe668;</text>\n\t\t\t\t\t\t<text v-if=\"curMarkerType=='zaixixan'\" class=\"custom-icon touch-icon-style\" @click=\"showOffline('lixian')\">&#xe648;</text>\n\t\t\t\t\t\t<text v-if=\"curMarkerType=='lixian'\" class=\"custom-icon touch-icon-style\" @click=\"showAll('all')\">&#xe645;</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</map>\n\t\t</view>\n\t\t\n\t\t<com-hoc-touchbox class=\"touch-box-wrapper\" v-if=\"touchboxShow\" ref=\"touchBox\" :disable=\"isTouchDisable\" \n\t\t\tcustomStyle=\"padding-top:15rpx;margin: 0 10rpx;border-radius:10px 10px 0 0;\"\n\t\t\t:initTop=\"initTop\" minTop=\"100\" maxTop=\"100\" @get-end-detail=\"getEndDetail\"\n\t\t\t@click.stop.prevent\n\t\t>\n\t\t\t<view class=\"touch-wrapper\" @click.stop.prevent>\n\t\t\t\t<time-picker-com\n\t\t\t\t\tref=\"overviewtimepicker\"\n\t\t\t\t\tstartKey=\"starttime\"\n\t\t\t\t\tendKey=\"endtime\"\n\t\t\t\t\tpickerMode=\"date\"\n\t\t\t\t\t:initParam=\"tDataParam\"\n\t\t\t\t\t:hasProject=\"true\"\n\t\t\t\t\t@onConfirm=\"onSearch\"\n\t\t\t\t></time-picker-com>\n\t\t\t\t\n\t\t\t\t<scroll-view :scroll-y=\"isScrollY\" :style=\"{height:`${windowHeight-220}px`}\">\n\t\t\t\t\t<overview-chart-com\n\t\t\t\t\t\tid=\"overview\"\n\t\t\t\t\t\tref=\"overviewchartcom\"\n\t\t\t\t\t\t:chartNumArr=\"chartNumArr\"\n\t\t\t\t\t\t:distanceChartData=\"distanceChartData\"\n\t\t\t\t\t\t:drivetimeChartData=\"drivetimeChartData\"\n\t\t\t\t\t\t:speedgreaterChartData=\"speedgreaterChartData\"\n\t\t\t\t\t></overview-chart-com>\n\t\t\t\t</scroll-view>\n\t\t\t\t\n\t\t\t\t<u-datetime-picker v-if=\"timePickerShow\" :show=\"timePickerShow\" mode=\"date\"\n\t\t\t\t\t:value=\"Number(new Date())\"\n\t\t\t\t\t@confirm=\"conformTime\"\n\t\t\t\t\t@cancel=\"datetimePickerClose\"\n\t\t\t\t\t@close=\"datetimePickerClose\"\n\t\t\t\t\t@click.stop.prevent\n\t\t\t\t\t@touchmove.stop.prevent\n\t\t\t\t></u-datetime-picker>\r\n\t\t\t</view>\r\n\t\t</com-hoc-touchbox>\n\t</view>\n</template>\n\n<script>\n\timport moment from 'moment'\n\timport apiLib from '@/api/api.js'\n\timport {debounce,deepClone} from '@/lib/lib.js'\n\timport {ChartOptsManager} from '@/lib/chartOpts/chartOpts.js'\n\timport {MapMannager} from './tool.js'\n\timport overviewChartCom from './components/overviewChartCom.vue'\n\timport timePickerCom from './components/timepickCom.vue'\n\t\n\tlet MAP_CTX = null // 地图对象\n\tlet Marker_List = [] // marker列表\n\tlet Real_Time_Data_List = [] // 实时数据列表，所有车\n\tlet curTimePickerName='' //starttime,endtime\n\t\n\texport default {\n\t\tname:'test-car-overview',\n\t\tcomponents:{\n\t\t\t'overview-chart-com':overviewChartCom,\n\t\t\t'time-picker-com':timePickerCom\n\t\t},\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tinitTop:550,\n\t\t\t\tisTouchDisable: false, // 是否禁用滑动\r\n\t\t\t\twindowHeight: null,\r\n\t\t\t\tisScrollY: true,\n\t\t\t\tlatitude:'31.23037',\n\t\t\t\tlongitude:'121.4737',\n\t\t\t\ttouchboxShow:false, // 地图渲染完成后再显示滑动框\n\t\t\t\ttotalItemShow:false, // 在线车辆进度图加载完成后再显示总车辆\n\t\t\t\ttimePickerShow:false, // 时间选择器\n\t\t\t\ttotal:201, // 车辆总数\n\t\t\t\tonLineNum:0, // 在线车辆数\n\t\t\t\tcurMarkerType:'all', // 当前显示的是在线车辆还是离线还是全部车辆图标 'all','zaixixan','lixian'\n\t\t\t\tcircleData:{}, // 在线车辆百分比\n\t\t\t\tchartNumArr:[], // 数据统计大数字c\n\t\t\t\tdistanceChartData:{categories: [], series: [{data:[]}]}, //所有车辆驾驶总里程总览\n\t\t\t\tdrivetimeChartData:{categories: [], series: [{data:[]}]}, //所有车辆驾驶总时长总览\n\t\t\t\tspeedgreaterChartData:{categories: [], series: [{data:[]}]}, //所有车辆驾不同驶速度的时长分布统计\n\t\t\t\ttDataParam:{ // getTDataDayRes 请求的params\n\t\t\t\t\tstarttime:moment().startOf('month').format('YYYY-MM-DD'),\n\t\t\t\t\tendtime:moment().endOf('month').format('YYYY-MM-DD')\n\t\t\t\t},\n\t\t\t\tdebounceRegionchange:debounce(this.regionchange),\n\t\t\t\tcolumopts:ChartOptsManager.getColumnOpts(),\n\t\t\t\tdistanceopts:ChartOptsManager.getAreaOpts(),\n\t\t\t\tspeedgreateropts:ChartOptsManager.getAreaOpts({showLegend:true}),\n\t\t\t\tarcbaropts:ChartOptsManager.getArcbarOpts({titleVal:this.onLineNum,subtitleVal:'在线',radius:80}),\n\t\t\t\tsubkey:'WAHBZ-KXAE3-A3M3Q-3SBAC-EVU4T-4VFJ6',\n\t\t\t}\n\t\t},\n\t\tcreated(){\n\t\t\tthis.getTDataDayRes() // 获取图表数据\n\t\t},\n\t\tmounted(){\n\t\t\tthis.windowHeight = uni.getSystemInfoSync().windowHeight\n\t\t\tthis.initTop = this.windowHeight-100\n\t\t},\n\t\tasync onReady() {\n\t\t\tthis.getCurLocation()\n\t\t\t\n\t\t\t//创建并返回 map 上下文 mapContext 对象\n\t\t\tMAP_CTX = uni.createMapContext('map',this)\n\t\t\t\n\t\t\tawait this.getRealTimeDataAll()\n\t\t\t\n\t\t\tMapMannager.initMap(MAP_CTX, true, Real_Time_Data_List)\n\t\t\t\n\t\t\tMarker_List = MapMannager.getMarkerList()\n\t\t\t\n\t\t\t// this.getTDataDayRes()\n\t\t},\n\t\tmethods:{\n\t\t\tshowOnline(type){ // 只展示在线车辆图标\n\t\t\t\tthis.curMarkerType = type\n\t\t\t\tconst list = Marker_List.filter(i=>i.infoItem.isonline)\n\t\t\t\tMapMannager.addMarkers(list,MAP_CTX,true)\n\t\t\t},\n\t\t\tshowOffline(type){ // 只展示离线车辆图标\n\t\t\t\tthis.curMarkerType = type\n\t\t\t\tconst list = Marker_List.filter(i=>!i.infoItem.isonline)\n\t\t\t\tMapMannager.addMarkers(list,MAP_CTX,true)\n\t\t\t},\n\t\t\tshowAll(type){ // 展示所有车辆图标\n\t\t\t\tthis.curMarkerType = type\n\t\t\t\tMapMannager.addMarkers(Marker_List,MAP_CTX,true)\n\t\t\t},\n\t\t\tasync getRealTimeDataAll(){ // 获取所有实时数据,并生产markers列表,并添加到地图\n\t\t\t\tconst res = await apiLib.getRealTimeDataAll()\n\t\t\t\tif(res.isOk){\n\t\t\t\t\tthis.total = res.total\n\t\t\t\t\tthis.onLineNum = res.onLineNum\n\t\t\t\t\tconst percent = this.onLineNum/this.total\n\t\t\t\t\tconst cData = { series: [ { name: \"在线\", data: percent } ] }\n\t\t\t\t\t\n\t\t\t\t\tthis.arcbaropts = ChartOptsManager.getArcbarOpts({titleVal:this.onLineNum,subtitleVal:'在线',radius:80})\n\t\t\t\t\tthis.circleData = cData\n\t\t\t\t\t\n\t\t\t\t\tReal_Time_Data_List = deepClone(res.data)\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync getTDataDayRes(){ //获取日统计接口\n\t\t\t\tconst res = await apiLib.getTDataDayRes(this.tDataParam)\n\t\t\t\t\n\t\t\t\tif(res.isOk){\n\t\t\t\t\tthis.distanceChartData = res.chartData.distancceObj\n\t\t\t\t\tthis.drivetimeChartData = res.chartData.drivetimeObj\n\t\t\t\t\tthis.speedgreaterChartData = res.chartData.speedgreaterObj\n\t\t\t\t\t\n\t\t\t\t\tthis.chartNumArr = res.chartNumArr\n\t\t\t\t\tconsole.log(this.chartNumArr,'overview----chartNumArr')\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync getHisdataslice(){ // 查询历史数据切片接口\n\t\t\t\tconst params={\n\t\t\t\t\tstarttime:'2022-05-01 12:00:00',\n\t\t\t\t\tendtime:'2022-05-10 12:00:00',\n\t\t\t\t}\n\t\t\t\tconst res = await apiLib.getHisdataslice(params)\n\t\t\t},\n\t\t\tresetLoc(e){ // 地图复位\n\t\t\t\tconsole.log(e,'returnLoc复位')\n\t\t\t\tMAP_CTX.moveToLocation()\n\t\t\t},\n\t\t\tregionchange(e){ // 移动或缩放地图画布\n\t\t\t\tif((e.type || '').toLowerCase()==='end'){\n\t\t\t\t\tconsole.log(e,'regionchange')\n\t\t\t\t\t// e={\n\t\t\t\t\t// \ttype: \"end\",\n\t\t\t\t\t// \tcausedBy: \"scale\",\n\t\t\t\t\t// \tdetail: {\n\t\t\t\t\t// \t\tcausedBy: \"scale\"\n\t\t\t\t\t// \t\tcenterLocation:{\n\t\t\t\t\t// \t\t\tlatitude: 31.37543288573986\n\t\t\t\t\t// \t\t\tlongitude: 121.26526543957095\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\tregion:{\n\t\t\t\t\t// \t\t\tnortheast: {latitude: 31.383839540958938, longitude: 121.27137526512388}\n\t\t\t\t\t// \t\t\tsouthwest: {latitude: 31.36702547827418, longitude: 121.25915561401803}\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\trotate: 0\n\t\t\t\t\t// \t\tscale: 15.53\n\t\t\t\t\t// \t\tskew: 0\n\t\t\t\t\t// \t\ttype: \"end\"\n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t},\n\t\t\topenTimePicker(key){\n\t\t\t\tthis.timePickerShow = true\n\t\t\t\tcurTimePickerName = key\n\t\t\t},\n\t\t\tdatetimePickerClose(){ // 关闭时间选择框\n\t\t\t\tthis.timePickerShow = false\n\t\t\t},\n\t\t\tconformTime(e){ // 确定选择时间\n\t\t\t\tthis.tDataParam[curTimePickerName] = moment(e.value).format('YYYY-MM-DD')\n\t\t\t\tthis.datetimePickerClose()\n\t\t\t\tconsole.log(e,'------确定选择时间--------',this.tDataParam[curTimePickerName])\n\t\t\t},\n\t\t\tasync onSearch(timeObj){\n\t\t\t\tthis.tDataParam = {\n\t\t\t\t\t...this.tDataParam,\n\t\t\t\t\tstarttime:timeObj.starttime,\n\t\t\t\t\tendtime:timeObj.endtime,\n\t\t\t\t\tproject:timeObj.project || ''\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tawait this.getTDataDayRes()\n\t\t\t\t\n\t\t\t\tthis.$refs.overviewtimepicker.stopLoading()\n\t\t\t\t\n\t\t\t\tconsole.log(timeObj,'timeObj',this.tDataParam)\n\t\t\t},\n\t\t\tupdated(e){ // 在地图渲染更新完成时触发\n\t\t\t\tthis.touchboxShow = true\n\t\t\t\tconsole.log(e,'updated')\n\t\t\t},\n\t\t\ttooltipFormater(item, category, index, opts){ // tooltip formate\n\t\t\t\tconsole.log(item, category, index, opts,'tooltipFormater')\n\t\t\t\treturn ''\n\t\t\t},\n\t\t\tgetMapRegion(){ // northeast, southwest\n\t\t\t\tMAP_CTX.getRegion({\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t// res = {\n\t\t\t\t\t\t// \terrMsg: \"getMapRegion:ok\"\n\t\t\t\t\t\t// \tnortheast:{\n\t\t\t\t\t\t// \t\tlatitude: 31.380901539961986\n\t\t\t\t\t\t// \t\tlongitude: 121.27062988460807\n\t\t\t\t\t\t// \t},\n\t\t\t\t\t\t// \tsouthwest:{\n\t\t\t\t\t\t// \t\tlatitude: 31.368738066379453\n\t\t\t\t\t\t// \t\tlongitude: 121.26179011539193\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tconsole.log(res,'this.map.getRegion-success')\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\tconsole.log(err,'this.map.getRegion-err')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetCurLocation(){ // 获取当前经纬度\n\t\t\t\tuni.getLocation({\n\t\t\t\t\ttype: 'gcj02',\n\t\t\t\t\tsuccess: (res)=>{\n\t\t\t\t\t\tthis.latitude = res.latitude\n\t\t\t\t\t\tthis.longitude = res.longitude\n\t\t\t\t\t\tconsole.log(res,'getLocation')\n\t\t\t\t\t\tconsole.log('当前位置的经度：' + res.longitude);\n\t\t\t\t\t\tconsole.log('当前位置的纬度：' + res.latitude);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetEndDetail({ // 上拉滑动框滑动结束时\r\n\t\t\t\tminTop,\r\n\t\t\t\tmaxTop,\r\n\t\t\t\tcurTop\r\n\t\t\t}) {\r\n\t\t\t\tif (curTop == maxTop) this.isScrollY = true\r\n\t\t\t\telse this.isScrollY = false\n\t\t\t\tconsole.log(minTop,maxTop,curTop,'----getEndDetail----')\r\n\t\t\t},\n\t\t\tonMarkerTap(e){ // 点击车辆图标\n\t\t\t\tconst item = Marker_List.find(i=>i.id==e.markerId)\n\t\t\t\titem && this.toPerCarInfo(item)\n\t\t\t\t\n\t\t\t\tconsole.log(item,'=======itemitemitem=======')\n\t\t\t},\n\t\t\ttoPerCarInfo(e){ // 去单车详情页\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/page_testCarOverview/testCarOverview/subPages/perCarInfo/perCarInfo',\n\t\t\t\t\tsuccess(res,self) {\n\t\t\t\t\t\t// 跳转成功后,向目标页面传送数据\n\t\t\t\t\t\tres.eventChannel.emit('pushInitData',{terminalcode:e?.infoItem?.terminalcode||''})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\r\n\t\t\tonChangeTouchDisable() { // 控制touchbox是否可以滑动\r\n\t\t\t\tthis.isTouchDisable = !this.isTouchDisable\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: this.isTouchDisable ? '已禁用滑动' : '已开启滑动',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.page-test-car-overview{\n\t\t.map-wrapper{\n\t\t\twidth: 100vw;\n\t\t\theight: 100vh;\n\t\t\t.map-item{\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\t.car-arcbar-box{\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop:15rpx;\n\t\t\t\t\tright:15rpx;\n\t\t\t\t\tz-index:10;\n\t\t\t\t\t.total-item{\n\t\t\t\t\t\tfont-size:18rpx;\n\t\t\t\t\t\tline-height:24rpx;\n\t\t\t\t\t\ttext-align:center;\n\t\t\t\t\t\tcolor:#888;\n\t\t\t\t\t}\n\t\t\t\t\t.change-marker-box{\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\twidth: 80rpx;\n\t\t\t\t\t\theight: 80rpx;\n\t\t\t\t\t\tmargin-top: 20rpx;\n\t\t\t\t\t\tmargin-left: 20rpx;\n\t\t\t\t\t\t.touch-icon-style{\n\t\t\t\t\t\t\tcolor:#6970e2;\n\t\t\t\t\t\t\tfont-size: 48rpx;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.touch-box-wrapper{\n\t\t\t.touch-wrapper{\n\t\t\t\tmargin-top:20rpx;\n\t\t\t}\n\t\t}\n\t}\n</style>\n\n<style lang=\"scss\">\n\t.page-test-car-overview{\n\t\t.touch-box-wrapper{\n\t\t\t.time-pick-box{\n\t\t\t\t.right-box{\n\t\t\t\t\t.u-button{\n\t\t\t\t\t\t&:before{\n\t\t\t\t\t\t\tbackground-color: transparent !important;\n\t\t\t\t\t\t\tborder-color: transparent !important;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=style&index=0&id=7128c49e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=style&index=0&id=7128c49e&lang=scss&scoped=true&\"","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=style&index=1&lang=scss&\""],"sourceRoot":""}