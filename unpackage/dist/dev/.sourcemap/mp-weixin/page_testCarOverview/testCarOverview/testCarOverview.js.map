{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?c5ca","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?5ae0","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?3671","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?69fe","uni-app:///page_testCarOverview/testCarOverview/testCarOverview.vue","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/page_testCarOverview/testCarOverview/testCarOverview.vue?118f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","comHocTouchbox","qiunDataCharts","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,6E,mDAFmBA,GAAGC,kCAAoCC,EAG1DC,EAAWC,a;;;;2DCHX,2UACIC,EADJ,2MASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,2DACZ,aAAAF,E;;;;2GCvBf,o2C;;;;2GCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,eAAgB,WACd,OAAO,gJAITC,eAAgB,WACd,OAAO,+TAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCtCvB,k7BAA23B,eAAG,G;;;;yMC8C93B,+BACA,4BACA,yB,siCAEA,WACA,KACA,K,EAGA,CACA,yBACA,KAFA,WAGA,OACA,kBAEA,SACA,aACA,oBACA,qBACA,gBAEA,iBAMA,UACA,YACA,MACA,+CACA,yDACA,yDACA,oDAEA,cACA,uDACA,MAEA,qBACA,aACA,gBACA,OACA,YACA,YACA,eACA,eACA,eACA,eACA,aAEA,sBAEA,OACA,YACA,eACA,OACA,YACA,YACA,kBAGA,OACA,QACA,SACA,cACA,qBACA,oBACA,cACA,yBACA,mBACA,8BACA,oBACA,iBACA,2BAIA,+CAGA,QAxEA,WAwEA,gIAGA,mBAGA,8BANA,SAYA,uBAZA,OAaA,8BACA,gCAGA,gBAjBA,8CAmBA,SACA,QADA,WACA,yIACA,uBADA,OAEA,eACA,eAHA,8CAKA,WANA,WAOA,SACA,yBACA,QACA,OACA,SACA,UACA,eACA,+EACA,eACA,gBACA,OACA,aACA,YACA,cACA,eACA,sBACA,oBACA,UACA,oBAEA,cACA,QAKA,qBAEA,cACA,UACA,SACA,SAHA,SAGA,GACA,yCAIA,WA3CA,WA6CA,qBACA,sBACA,eACA,YACA,SAJA,SAIA,GACA,sCAIA,wCACA,qCACA,iBAEA,yBACA,uCAEA,cACA,GADA,IAEA,QACA,SACA,YACA,sCACA,OACA,iBACA,YACA,SACA,UACA,cACA,aACA,sBACA,eACA,gBACA,mBACA,UACA,kBAKA,cACA,UACA,SACA,SAHA,SAGA,GACA,mFAKA,uCACA,wCAGA,mBAjGA,WAiGA,+IACA,+BADA,OACA,EADA,OAEA,SACA,gBACA,wBACA,2BALA,8CAwBA,YAzHA,WAyHA,wIACA,GACA,uBACA,sBAHA,SAKA,4BALA,OAKA,EALA,OAOA,SACA,mBAEA,oBACA,oBADA,IAEA,kFAGA,wDAfA,8CAoDA,gBA7KA,WA6KA,6HACA,GACA,gCACA,+BAHA,SAKA,6BALA,OAKA,EALA,OAMA,iDANA,8CAoBA,YAjMA,WAiMA,+IACA,sCADA,OACA,EADA,OAEA,uCAFA,8CAIA,SArMA,SAqMA,GACA,6BACA,oBAEA,aAzMA,SAyMA,GACA,oCACA,+BAsBA,QAjOA,SAiOA,GACA,qBACA,0BAEA,gBArOA,SAqOA,SAEA,OADA,uCACA,IAEA,aAzOA,WA0OA,aACA,QADA,SACA,GAYA,6CAEA,KAfA,SAeA,GACA,4CAIA,eA9PA,WA8PA,WACA,eACA,aACA,oBACA,sBACA,wBACA,6BACA,oCACA,uCAIA,aA1QA,YA8QA,EAHA,OAGA,IAFA,EAEA,EAFA,OACA,EACA,EADA,OAEA,qBAGA,YAlRA,SAkRA,GACA,qDACA,4CAEA,qBAtRA,WAuRA,yCACA,aACA,0CACA,iB;;;;2DC5aA,wrDAA0oD,eAAG,G","file":"page_testCarOverview/testCarOverview/testCarOverview.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './page_testCarOverview/testCarOverview/testCarOverview.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./testCarOverview.vue?vue&type=template&id=7128c49e&scoped=true&\"\nvar renderjs\nimport script from \"./testCarOverview.vue?vue&type=script&lang=js&\"\nexport * from \"./testCarOverview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./testCarOverview.vue?vue&type=style&index=0&id=7128c49e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7128c49e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"page_testCarOverview/testCarOverview/testCarOverview.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=template&id=7128c49e&scoped=true&\"","var components\ntry {\n  components = {\n    comHocTouchbox: function() {\n      return import(\n        /* webpackChunkName: \"components/com-hoc-touchbox\" */ \"@/components/com-hoc-touchbox.vue\"\n      )\n    },\n    qiunDataCharts: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts\" */ \"@/uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"page-test-car-overview\">\n\t\t<view class=\"map-wrapper\">\n\t\t\t<map class=\"map-item\" id=\"map\" :subkey=\"subkey\" layer-style=\"2\" :latitude=\"latitude\"\n\t\t\t\t:longitude=\"longitude\" :scale=\"8\" :show-location=\"true\" :enable-overlooking=\"true\"\n\t\t\t\t@regionchange=\"debounceRegionchange\" @updated=\"updated\" @markertap=\"onMarkerTap\"\n\t\t\t></map>\n\t\t</view>\n\t\t\n\t\t<com-hoc-touchbox\n\t\t\tv-if=\"touchboxShow\"\n\t\t  ref=\"touchBox\" \n\t\t\t:disable=\"isTouchDisable\" \n\t\t\t@get-end-detail=\"getEndDetail\"\n\t\t\tcustomStyle=\"border-radius:10px 10px 0 0;margin: 0 10rpx;\"\n\t\t\tinitTop=\"500\" minTop=\"100\" maxTop=\"50\"\n\t\t>\n\t\t\t<view @click.stop.prevent>\r\n\t\t\t\t车辆总数：{{total}} ---- 在线数：{{onLineNum}}\n\t\t\t\t<view @click=\"getTDataDay\">getTDataDay</view>\n\t\t\t\t<view @click=\"getHisdataslice\">getHisdataslice</view>\n\t\t\t\t\n\t\t\t\t<view class=\"chart-box\">\n\t\t\t\t\t<qiun-data-charts\n\t\t\t\t\t\ttype=\"column\"\n\t\t\t\t\t\t:opts=\"opts\"\n\t\t\t\t\t\t:chartData=\"type2dData\"\n\t\t\t\t\t\t:canvas2d=\"false\"\n\t\t\t\t\t\t:ontouch=\"true\"\n\t\t\t\t\t\t:disableScroll=\"true\"\n\t\t\t\t\t\t:tooltipFormat=\"tooltipFormater\"\n\t\t\t\t\t\tcanvasId=\"canvasColumn\"\n\t\t\t\t\t\t@click.stop.prevent\n\t\t\t\t\t></qiun-data-charts>\n\t\t\t\t</view>\t\n\t\t\t\t\n\t\t\t\t<!-- <scroll-view :scroll-y=\"isScrollY\">\r\n\t\t\t\t\t\r\n\t\t\t\t</scroll-view> -->\r\n\t\t\t</view>\r\n\t\t</com-hoc-touchbox>\n\t\t\n\t</view>\n</template>\n\n<script>\n\timport apiLib from '@/api/api.js'\n\timport {debounce,deepClone} from '@/lib/lib.js'\n\timport {MapMannager} from './tool.js'\n\t\n\tlet MAP_CTX = null // 地图对象\n\tlet Marker_List = [] // marker列表\n\tlet Real_Time_Data_List = [] // 实时数据列表，所有车\n\t\n\t\n\texport default {\n\t\tname:'test-car-overview',\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tisTouchDisable: false, // 是否禁用滑动\r\n\t\t\t\t// windowHeight: null,\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tisScrollY: false,\n\t\t\t\tlatitude:'31.23037',\n\t\t\t\tlongitude:'121.4737',\n\t\t\t\ttouchboxShow:false,\n\t\t\t\t// layerStyle:2,\n\t\t\t\tinquireParams:{\n\t\t\t\t\t// pageNum:1,\n\t\t\t\t\t// pageSize:10,\n\t\t\t\t\t// isonline:1,\n\t\t\t\t\t// isbind:1\n\t\t\t\t},\n\t\t\t\ttotal:201, // 车辆总数\n\t\t\t\tonLineNum:0, // 在线车辆数\n\t\t\t\tDATA:{\n\t\t\t\t\tdistanceObj: {categories: [], series: [{data:[]}]},\n\t\t\t\t\tspeedgreater10timeObj: {categories: [], series: [{data:[]}]},\n\t\t\t\t\tspeedgreater80timeObj: {categories: [], series: [{data:[]}]},\n\t\t\t\t\tsumdrivetimeObj: {categories: [], series: [{data:[]}]}\n\t\t\t\t},\n\t\t\t\ttype2dData:{},\n\t\t\t\tdebounceRegionchange:debounce(this.regionchange),\n\t\t\t\topts:{\n\t\t\t\t\t// color: [\"#39B54A\",\"#FBBD08\",\"#FAC858\",\"#EE6666\",\"#73C0DE\",\"#3CA272\",\"#FC8452\",\"#9A60B4\",\"#ea7ccc\"],\n\t\t\t\t  padding: [25,25,0,25],\n\t\t\t\t  dataLabel:false, // 是否展示数据点上方的数据文案\n\t\t\t\t\tenableScroll:true, // 开启图表可拖拽滚动\n\t\t\t\t  xAxis:{\n\t\t\t\t\t\tdisabled:false, // true:不绘制X轴\n\t\t\t\t\t\taxisLine:false, // 绘制坐标轴轴线\n\t\t\t\t\t\tcalibration:false, // 坐标轴刻度线\n\t\t\t\t    disableGrid: true, // true:不绘制纵向网格(即默认绘制网格)\n\t\t\t\t\t\trotateLabel:true, //【旋转】数据点（刻度点）文字\n\t\t\t\t\t\trotateAngle:70, // 开启上面旋转功能后，文字旋转的角度，取值范围(-90至90)\n\t\t\t\t\t\titemCount:10, // 单屏数据密度即图表可视区域内显示的X轴数据点数量，仅在启用enableScroll时有效\n\t\t\t\t    // axisLineColor:'rgba(255,255,255,0)' // 横坐标轴透明\n\t\t\t\t    axisLineColor:'#ccc' // 横坐标轴透明\n\t\t\t\t  },\n\t\t\t\t  yAxis:{\n\t\t\t\t    disabled: false,\n\t\t\t\t    disableGrid: true,\n\t\t\t\t    data:[{\n\t\t\t\t      disabled:false, // 不绘制Y轴（刻度和轴线都不绘制）\n\t\t\t\t      axisLine:false ,// 纵坐标轴透明\n\t\t\t\t\t\t\tcalibration: false, // 刻度线是否显示\n\t\t\t\t    }]\n\t\t\t\t  },\n\t\t\t\t  extra:{\n\t\t\t\t\t\tcolumn:{\n\t\t\t\t\t\t\twidth:10,\n\t\t\t\t\t\t\tcategoryGap:5,// 每个category点位（X轴点）柱子组之间的间距\n\t\t\t\t\t\t\tactiveBgColor: \"#333\",\n\t\t\t\t\t\t\tactiveBgOpacity: 0.08,\n\t\t\t\t\t\t\tmeterBorder: 0,\n\t\t\t\t\t\t\tmeterFillColor: \"#904777\",\n\t\t\t\t\t\t\tbarBorderCircle:false, // 启用分组柱状图半圆边框\n\t\t\t\t\t\t\tbarBorderRadius: [10,10,10,10], // 自定义4个圆角半径[左上,右上,右下,左下]（请关闭上面barBorderCircle）\n\t\t\t\t\t\t\tlinearType:'custom', // 渐变类型 (custom:自定义颜色)\n\t\t\t\t\t\t\tlinearOpacity:0.4, // 透明渐变的透明度（值范围0到1，值越小越透明）\n\t\t\t\t\t\t\tcustomColor:['#6970e2'], // 自定义渐变颜色，数组类型对应series的数组长度以匹配不同series颜色的不同配色方案，例如[\"#FA7D8D\", \"#EB88E2\"]\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsubkey:'WAHBZ-KXAE3-A3M3Q-3SBAC-EVU4T-4VFJ6',\n\t\t\t}\n\t\t},\n\t\tasync onReady() {\n\t\t\t// this.windowHeight = uni.getSystemInfoSync().windowHeight\n\t\t\t\n\t\t\tthis.getCurLocation()\n\t\t\t\n\t\t\t//创建并返回 map 上下文 mapContext 对象\n\t\t\tMAP_CTX = uni.createMapContext('map',this)\n\t\t\t\n\t\t\t// 方式1:\n\t\t\t// this.initMap()\n\t\t\t\n\t\t\t// 方式2:\n\t\t\tawait this.getRealTimeDataAll()\n\t\t\tMapMannager.initMap(MAP_CTX, true, Real_Time_Data_List)\n\t\t\tMarker_List = MapMannager.getMarkerList()\n\t\t\t\n\t\t\t// this.getDataList()\n\t\t\tthis.getTDataDay()\n\t\t},\n\t\tmethods:{\n\t\t\tasync initMap(){ // 1.请求所有实时数据列表 2.定义聚合 3.在地图上添加markers和点聚合\n\t\t\t\tawait this.getRealTimeDataAll()\n\t\t\t\tthis.addCluster()\n\t\t\t\tthis.addMarkers()\n\t\t\t},\n\t\t\taddMarkers(){ // 2.生成markers 3.在地图上添加markers\n\t\t\t\tlet list = []\n\t\t\t\tReal_Time_Data_List.forEach((item,index)=>{\n\t\t\t\t\tlist.push({\n\t\t\t\t\t\tid:index+1,\n\t\t\t\t\t\twidth: 30,\n\t\t\t\t\t\theight: 30,\n\t\t\t\t\t\tjoinCluster: true, // 指定了该参数才会参与聚合\n\t\t\t\t\t\ticonPath:item.isonline?'/static/mapImg/carColor.png':'/static/mapImg/carGrey.png',\n\t\t\t\t\t\tlatitude:item.lat,\n\t\t\t\t\t\tlongitude:item.lon,\n\t\t\t\t\t\tlabel: {\n\t\t\t\t\t\t\tcolor: '#bbb',\n\t\t\t\t\t\t\tfontSize: 10,\n\t\t\t\t\t\t\tborderWidth: 0,\n\t\t\t\t\t\t\tborderRadius: 3,\n\t\t\t\t\t\t\tborderColor: '#000000',\n\t\t\t\t\t\t\tbgColor: '#ebeef11f',\n\t\t\t\t\t\t\tpadding: 1,\n\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinfoItem:{ // 改标记对应的车的信息\n\t\t\t\t\t\t\t...item\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tMarker_List = deepClone(list)\n\t\t\t\t\n\t\t\t\tMAP_CTX.addMarkers({ // 添加车辆图标\n\t\t\t\t\tmarkers:Marker_List,\n\t\t\t\t\tclear: false,\n\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\tconsole.log('addMarkers111111111', res)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\taddCluster(){ // 3.在地图上添加点聚合\n\t\t\t\t// 仅调用初始化，才会触发 on.(\"markerClusterCreate\", (e) => {})\n\t\t\t\tMAP_CTX.initMarkerCluster({\n\t\t\t\t\tenableDefaultStyle: false,\n\t\t\t\t\tzoomOnClick: true,\n\t\t\t\t\tgridSize: 30,\n\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\tconsole.log('initMarkerCluster', res)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tMAP_CTX.on(\"markerClusterCreate\", (e) => { // enableDefaultStyle 为 true 时不会触发该事件\n\t\t\t\t\tconsole.log(\"markerClusterCreate\", e);\n\t\t\t\t\tconst clusters = e.clusters\n\t\t\t\t\t\n\t\t\t\t\tconst clusterMarkers = clusters.map(cluster => {\n\t\t\t\t\t\tconst {center,clusterId,markerIds} = cluster\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...center,\n\t\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\t\theight: 0,\n\t\t\t\t\t\t\tclusterId, // 必须\n\t\t\t\t\t\t\ticonPath:'/static/mapImg/cluster.png',\n\t\t\t\t\t\t\tlabel: {\n\t\t\t\t\t\t\t\tcontent: markerIds.length,\n\t\t\t\t\t\t\t\tfontSize: 14,\n\t\t\t\t\t\t\t\twidth: 45,\n\t\t\t\t\t\t\t\theight: 45,\n\t\t\t\t\t\t\t\tborderWidth: 4,\n\t\t\t\t\t\t\t\tcolor:'#888',\n\t\t\t\t\t\t\t\tborderColor: '#6970e2',\n\t\t\t\t\t\t\t\tbgColor: '#fff',\n\t\t\t\t\t\t\t\tborderRadius: 28,\n\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\tanchorX: 0,\n\t\t\t\t\t\t\t\tanchorY: -18,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tMAP_CTX.addMarkers({\n\t\t\t\t\t\tmarkers:clusterMarkers, // 添加聚合图标\n\t\t\t\t\t\tclear: false,\n\t\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\t\tconsole.log('clusterCreate addClusterMarkers', res,clusterMarkers,'======clusterMarkers===')\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tMAP_CTX.on('markerClusterClick', res => {\n\t\t\t\t\tconsole.log('markerClusterClick', res)\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync getRealTimeDataAll(){ // 获取所有实时数据,并生产markers列表,并添加到地图\n\t\t\t\tconst res = await apiLib.getRealTimeDataAll()\n\t\t\t\tif(res.isOk){\n\t\t\t\t\tthis.total = res.total\n\t\t\t\t\tthis.onLineNum = res.onLineNum\n\t\t\t\t\tReal_Time_Data_List = deepClone(res.data)\n\t\t\t\t}\n\t\t\t\t// accstate: null\n\t\t\t\t// altitude: 66\n\t\t\t\t// angle: 217\n\t\t\t\t// d: null\n\t\t\t\t// dbtime: \"2021-12-24T15:32:43.33\"\n\t\t\t\t// gnsscount: null\n\t\t\t\t// isdriving: null\n\t\t\t\t// isonline: false\n\t\t\t\t// isposition: true\n\t\t\t\t// lat: 30.489986\n\t\t\t\t// lon: 114.50309\n\t\t\t\t// mileage: 2.2\n\t\t\t\t// positiontime: \"2021-12-24T15:32:42\"\n\t\t\t\t// speed: 0\n\t\t\t\t// terminalcode: \"53810829755\"\n\t\t\t\t// traveltime: \"2021-12-24T15:32:42\"\n\t\t\t},\n\t\t\tasync getTDataDay(){ //获取日统计接口\n\t\t\t\tconst params={\n\t\t\t\t\tstarttime:'2022-04-30',\n\t\t\t\t\tendtime:'2022-05-30'\n\t\t\t\t}\n\t\t\t\tconst res = await apiLib.getTDataDayRes(params)\n\t\t\t\t\n\t\t\t\tif(res.isOk){\n\t\t\t\t\tthis.DATA = res.chartData\n\t\t\t\t\t\n\t\t\t\t\tthis.type2dData = {\n\t\t\t\t\t\t...this.DATA.distanceObj,\n\t\t\t\t\t\tcategories:this.DATA.distanceObj.categories.map(i=>i.slice(5))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconsole.log(res,'===getTDataDay===获取日统计接口getTDataDayRes')\n\t\t\t\t\n\t\t\t\t// autodrivingdistance: 0\n\t\t\t\t// autodrivingtime: 0\n\t\t\t\t// carid: \"128842061468581888\"\n\t\t\t\t// carno: \"3810816791\"\n\t\t\t\t// createBy: \"admin\"\n\t\t\t\t// createTime: \"2022-05-01 01:00:06\"\n\t\t\t\t// day: \"2022-04-30\"\n\t\t\t\t// delFlag: \"0\"\n\t\t\t\t// ecusaveragespeed: 0\n\t\t\t\t// ecusaveragespeedhavezero: 0\n\t\t\t\t// ecusmaxspeed: 0\n\t\t\t\t// ecusumdrivedistance: 0\n\t\t\t\t// endlat: 40.168266\n\t\t\t\t// endlon: 117.153198\n\t\t\t\t// endtime: null\n\t\t\t\t// gpsaveragespeed: 38.18\n\t\t\t\t// gpsaveragespeedhavezero: 7.92\n\t\t\t\t// gpsmaxspeed: 116.5\n\t\t\t\t// id: \"191747782086148096\"\n\t\t\t\t// manualdrivingdistance: 0\n\t\t\t\t// manualdrivingtime: 0\n\t\t\t\t// oil: 0\n\t\t\t\t// params: {UserCarPermission: \"\", TenantPermission: \"\"}\n\t\t\t\t// remark: \"\"\n\t\t\t\t// speedgreater10time: 7602\n\t\t\t\t// speedgreater80time: 135\n\t\t\t\t// startime: null\n\t\t\t\t// startlat: 40.144205\n\t\t\t\t// startlon: 117.090541\n\t\t\t\t// sumdrivedistance: 96\n\t\t\t\t// sumdrivetime: 43997\n\t\t\t\t// terminalcode: \"53810816791\"\n\t\t\t\t// updateBy: \"\"\n\t\t\t\t// updateTime: null\n\t\t\t},\n\t\t\tasync getHisdataslice(){ // 查询历史数据切片接口\n\t\t\t\tconst params={\n\t\t\t\t\tstarttime:'2022-05-01 12:00:00',\n\t\t\t\t\tendtime:'2022-05-10 12:00:00',\n\t\t\t\t}\n\t\t\t\tconst res = await apiLib.getHisdataslice(params)\n\t\t\t\tconsole.log(res,'===getHisdataslice===查询历史数据切片接口')\n\t\t\t\t// createBy: null\n\t\t\t\t// createTime: \"2022-05-01 12:06:56\"\n\t\t\t\t// endtime: \"2022-05-01 12:06:53\"\n\t\t\t\t// id: \"191915597078380544\"\n\t\t\t\t// params: {UserCarPermission: \"\", TenantPermission: \"\"}\n\t\t\t\t// remark: null\n\t\t\t\t// starttime: \"2022-05-01 12:01:30\"\n\t\t\t\t// sumMileage: 0.09999999999999432\n\t\t\t\t// sumTime: \"323\"\n\t\t\t\t// terminalcode: \"53810827241\"\n\t\t\t\t// updateBy: null\n\t\t\t\t// updateTime: null\n\t\t\t},\n\t\t\tasync getDataList(){ // 获取车辆列表\n\t\t\t\tconst res = await apiLib.getCarList(this.inquireParams)\n\t\t\t\tconsole.log(res,'=====getDataList=====')\n\t\t\t},\n\t\t\tresetLoc(e){ // 地图复位\n\t\t\t\tconsole.log(e,'returnLoc复位')\n\t\t\t\tMAP_CTX.moveToLocation()\n\t\t\t},\n\t\t\tregionchange(e){ // 移动或缩放地图画布\n\t\t\t\tif((e.type || '').toLowerCase()==='end'){\n\t\t\t\t\tconsole.log(e,'regionchange')\n\t\t\t\t\t// e={\n\t\t\t\t\t// \ttype: \"end\",\n\t\t\t\t\t// \tcausedBy: \"scale\",\n\t\t\t\t\t// \tdetail: {\n\t\t\t\t\t// \t\tcausedBy: \"scale\"\n\t\t\t\t\t// \t\tcenterLocation:{\n\t\t\t\t\t// \t\t\tlatitude: 31.37543288573986\n\t\t\t\t\t// \t\t\tlongitude: 121.26526543957095\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\tregion:{\n\t\t\t\t\t// \t\t\tnortheast: {latitude: 31.383839540958938, longitude: 121.27137526512388}\n\t\t\t\t\t// \t\t\tsouthwest: {latitude: 31.36702547827418, longitude: 121.25915561401803}\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\trotate: 0\n\t\t\t\t\t// \t\tscale: 15.53\n\t\t\t\t\t// \t\tskew: 0\n\t\t\t\t\t// \t\ttype: \"end\"\n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdated(e){ // 在地图渲染更新完成时触发\n\t\t\t\tthis.touchboxShow = true\n\t\t\t\tconsole.log(e,'updated')\n\t\t\t},\n\t\t\ttooltipFormater(item, category, index, opts){ // tooltip formate\n\t\t\t\tconsole.log(item, category, index, opts,'tooltipFormater')\n\t\t\t\treturn ''\n\t\t\t},\n\t\t\tgetMapRegion(){ // northeast, southwest\n\t\t\t\tMAP_CTX.getRegion({\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t// res = {\n\t\t\t\t\t\t// \terrMsg: \"getMapRegion:ok\"\n\t\t\t\t\t\t// \tnortheast:{\n\t\t\t\t\t\t// \t\tlatitude: 31.380901539961986\n\t\t\t\t\t\t// \t\tlongitude: 121.27062988460807\n\t\t\t\t\t\t// \t},\n\t\t\t\t\t\t// \tsouthwest:{\n\t\t\t\t\t\t// \t\tlatitude: 31.368738066379453\n\t\t\t\t\t\t// \t\tlongitude: 121.26179011539193\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tconsole.log(res,'this.map.getRegion-success')\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\tconsole.log(err,'this.map.getRegion-err')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetCurLocation(){ // 获取当前经纬度\n\t\t\t\tuni.getLocation({\n\t\t\t\t\ttype: 'gcj02',\n\t\t\t\t\tsuccess: (res)=>{\n\t\t\t\t\t\tthis.latitude = res.latitude\n\t\t\t\t\t\tthis.longitude = res.longitude\n\t\t\t\t\t\tconsole.log(res,'getLocation')\n\t\t\t\t\t\tconsole.log('当前位置的经度：' + res.longitude);\n\t\t\t\t\t\tconsole.log('当前位置的纬度：' + res.latitude);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetEndDetail({\r\n\t\t\t\tminTop,\r\n\t\t\t\tmaxTop,\r\n\t\t\t\tcurTop\r\n\t\t\t}) {\r\n\t\t\t\tif (curTop == maxTop) this.isScrollY = true\r\n\t\t\t\telse this.isScrollY = false\r\n\t\t\t},\n\t\t\tonMarkerTap(e){\n\t\t\t\tconst item = Marker_List.find(i=>i.id==e.markerId)\n\t\t\t\tconsole.log(e,'------onMarkerTap------',item)\n\t\t\t},\r\n\t\t\tonChangeTouchDisable() {\r\n\t\t\t\tthis.isTouchDisable = !this.isTouchDisable\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: this.isTouchDisable ? '已禁用滑动' : '已开启滑动',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.page-test-car-overview{\n\t\t.map-wrapper{\n\t\t\twidth: 100vw;\n\t\t\theight: 100vh;\n\t\t\t.map-item{\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t}\n\t\t}\n\t}\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=style&index=0&id=7128c49e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testCarOverview.vue?vue&type=style&index=0&id=7128c49e&lang=scss&scoped=true&\""],"sourceRoot":""}