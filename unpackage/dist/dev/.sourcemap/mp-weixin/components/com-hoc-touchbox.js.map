{"version":3,"sources":["webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/components/com-hoc-touchbox.vue?4ac8","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/components/com-hoc-touchbox.vue?4943","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/components/com-hoc-touchbox.vue?e3d7","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/components/com-hoc-touchbox.vue?90fb","uni-app:///components/com-hoc-touchbox.vue","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/components/com-hoc-touchbox.vue?efdf"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,8UACIA,EADJ,wMASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,kCACZ,aAAAF,E;;;;2GCvBf,m1C;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,o6BAA62B,eAAG,G;;;;gJCeh3B,CACE,KAAF,mBACE,MAAF,CAEI,QAAJ,CACM,KAAN,QACM,SAAN,GAEI,OAAJ,CACM,KAAN,gBACM,QAAN,KAGI,YAAJ,gBAEI,eAAJ,CACM,KAAN,OACM,QAFN,WAGQ,MAAR,CACU,MAAV,KACU,MAAV,KACU,OAAV,QAKI,OAAJ,CACM,KAAN,gBACM,QAAN,GAGI,OAAJ,CACM,KAAN,gBACM,QAAN,IAGI,QAAJ,CACM,KAAN,gBACM,QAAN,OAGI,KAAJ,CACM,KAAN,QACM,SAAN,GAGI,MAAJ,CACM,KAAN,QACM,SAAN,IAGE,KAnDF,WAoDI,MAAJ,CACM,aAAN,KACM,UAAN,KACM,YAAN,KACM,IAAN,mBACM,IAAN,KACM,IAAN,KACM,SAAN,EACM,YAAN,EACM,SAAN,KACM,UAAN,OAGE,QAjEF,WAiEA,MAII,EAAJ,oBAFA,EAFA,EAEA,aACA,EAHA,EAGA,UAKI,KAAJ,eACI,KAAJ,YATA,MAcI,KAAJ,eAFA,GAZA,EAWA,MAXA,EAYA,OACA,EAbA,EAaA,OASA,0BAEA,2DACI,KAAJ,iBAEA,2DACI,KAAJ,mCAEA,qFACA,6DACI,KAAJ,kBAGA,IACM,KAAN,mEACM,KAAN,QASI,KAAJ,gCAEE,QAAF,CASI,aATJ,SASA,GACA,eACM,KAAN,cAEM,KAAN,8BAOM,KAAN,iCAGM,KAAN,uBAEI,YAzBJ,SAyBA,GACM,IAAN,aAAM,CAQA,IAAN,oDAEM,GAAN,YACQ,IAAR,aACQ,GAAR,uBAWU,OARA,KAAV,iCACU,KAAV,gBAKU,KAAV,kCAMA,kBAEI,WAvDJ,SAuDA,GACM,IAAN,aAAM,CAIA,GAFA,KAAN,2BAEA,WACQ,KAAR,cACQ,IAAR,kCACA,4BACA,MACU,KAAV,sCAGA,yCACA,kBAIM,KAAN,wBACQ,OAAR,SACQ,OAAR,SACQ,OAAR,WAEM,KAAN,aAEA,SAhFA,e;;;;2DChIA,8pDAAgnD,eAAG,G","file":"components/com-hoc-touchbox.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./com-hoc-touchbox.vue?vue&type=template&id=362313b8&scoped=true&\"\nvar renderjs\nimport script from \"./com-hoc-touchbox.vue?vue&type=script&lang=js&\"\nexport * from \"./com-hoc-touchbox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./com-hoc-touchbox.vue?vue&type=style&index=0&id=362313b8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"362313b8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/com-hoc-touchbox.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./com-hoc-touchbox.vue?vue&type=template&id=362313b8&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./com-hoc-touchbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./com-hoc-touchbox.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"com-hoc-touchbox\" :class=\"{touchend:isTouchEnd}\" @touchstart=\"onTouchStart\"\r\n    @touchmove.stop.prevent=\"onTouchmove\" @touchend=\"onTouchend\" @click.stop.prevent\r\n    :style=\"{top: top + distance + 'px',zIndex,height:windowHeight+'px'}\">\r\n    <view class=\"touchbox-content\" :style=\"customStyle\" @click.stop.prevent>\r\n      <view class=\"touch-line-box\">\r\n        <view class=\"touch-line\"></view>\n\t\t\t\t<!-- {{top}} -  {{distance}} -->\r\n      </view>\r\n      <slot></slot>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\n  export default {\r\n    name: \"com-hoc-touchbox\",\r\n    props: {\r\n      // 禁用滑动\r\n      disable: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      zIndex: {\r\n        type: [Number, String],\r\n        default: 100\r\n      },\r\n      // 自定义样式\r\n      customStyle: [String, Object],\r\n      // 自定义安全区域\r\n      customSafeArea: {\r\n        type: Object,\r\n        default () {\r\n          return {\r\n            h5Top: null,\r\n            wxTop: null,\r\n            bottom: null\r\n          }\r\n        }\r\n      },\r\n      // 最高top\r\n      maxTop: {\r\n        type: [Number, String],\r\n        default: 1\r\n      },\r\n      // 最低top\r\n      minTop: {\r\n        type: [Number, String],\r\n        default: 0.5\r\n      },\r\n      // 初始top\r\n      initTop: {\r\n        type: [Number, String],\r\n        default: 'min'\r\n      },\r\n      // 自动复位\r\n      auto: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      // 最高最低限制\r\n      limit: {\r\n        type: Boolean,\r\n        default: true\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        windowHeight: null, // 可使用区域高度\r\n        windowTop: null,\r\n        touchStartY: null, // 开始滑动时的Y轴坐标\r\n        top: this.initTop || null, // 上拉框top\r\n        max: null, // maxTop\r\n        min: null, // minTop\r\n        distance: 0, // 滑动距离\r\n        isTouchEnd: false, // 是否滑动结束Flag\r\n        boundary: null, // 规定盒子复位为最大或最小状态的分界线，默认为最大最小状态的中间\r\n        startTime: null, // 开始滑动时间\r\n      };\r\n    },\r\n    mounted() {\r\n      let {\r\n        windowHeight, // 可使用窗口高度\r\n        windowTop // 可使用窗口的顶部位置\r\n      } = uni.getSystemInfoSync()\n\t\t\t\n\t\t\t// console.log(uni.getSystemInfoSync(),'uni.getSystemInfoSync()')\n\t\t\t\r\n      this.windowHeight = windowHeight\r\n      this.windowTop = windowTop\r\n      let {\r\n        h5Top,\r\n        wxTop,\r\n        bottom\r\n      } = this.customSafeArea\r\n      // H5自定义安全区域\r\n      // #ifndef MP\r\n      if (h5Top) {\r\n        this.windowHeight -= h5Top\r\n        windowTop += h5Top\r\n      }\r\n      // #endif\r\n      if (bottom) this.windowHeight -= bottom\r\n      // 上拉框最大高度top\r\n      if (this.maxTop <= 1) this.max = this.windowHeight * (1 - +this.maxTop)\r\n      else this.max = +this.maxTop\r\n      // 上拉框最小高度top\r\n      if (this.minTop <= 1) this.min = this.windowHeight * (1 - +this.minTop)\r\n      else this.min = this.windowHeight - (+this.minTop)\r\n      // 初始的上拉框top\r\n      if (['min', 'max'].includes(this.initTop)) this.top = this.initTop === 'min' ? this.min : this.max\r\n      else if (this.initTop <= 1) this.top = this.windowHeight * (1 - +this.initTop)\r\n      else this.top = +this.initTop\r\n      // 微信自定义安全区域\r\n      // #ifdef MP\r\n      if (wxTop) {\r\n        this.max += wxTop === 'menuBtn' ? uni.getMenuButtonBoundingClientRect().bottom + 10 : wxTop\r\n        this.top += wxTop\r\n      }\r\n      // #endif\r\n      // H5自定义安全区域\r\n      // #ifndef MP\r\n      this.max += windowTop\r\n      this.min += windowTop\r\n      this.top += windowTop\r\n      // #endif\r\n      this.boundary = (this.max + this.min) / 2 // 规定盒子复位为最大或最小状态的分界线，默认为最大最小状态的中间\r\n    },\r\n    methods: {\r\n      // setBottom(value) {\r\n      //   if (this.auto) this.isTouchEnd = true\r\n      //   if (value <= 1) this.top = this.windowHeight * (1 - +value)\r\n      //   else this.top = (this.windowHeight - +value)\r\n      //   // #ifndef MP\r\n      //   this.top += this.windowTop\r\n      //   // #endif\r\n      // },\n      onTouchStart(e) {\n        if (this.disable) return\r\n        this.isTouchEnd = false // 关闭滑动结束Flag，作用为是否开启上拉框的过渡效果\r\n        // #ifndef APP-NVUE\r\n        this.top = e.currentTarget.offsetTop // 手指触碰到上拉框时，将上拉框top设置为上拉框当前的top\r\n        // #endif\n\t\t\t\t\r\n        // #ifdef APP-NVUE\r\n        this.touchStartY = e.touches[0].screenY // 此次滑动开始时的Y轴坐标\r\n        // #endif\r\n        // #ifndef APP-NVUE\r\n        this.touchStartY = e.touches[0].clientY // 此次滑动开始时的Y轴坐标\r\n        // #endif\n\t\t\t\t\r\n        this.startTime = Date.now() // 设置滑动开始时间\r\n      },\r\n      onTouchmove(e) {\n        if (this.disable) return\r\n        // #ifdef APP-NVUE\n        // let distance = e.touches[0].screenY - this.touchStartY // 滑动的距离 \n        let distance = Math.round(e.touches[0].screenY - this.touchStartY) // 滑动的距离 \n\r\n        // #endif\r\n        // #ifndef APP-NVUE\r\n        // let distance = e.touches[0].clientY - this.touchStartY // 滑动的距离 \r\n        let distance = Math.round(e.touches[0].clientY - this.touchStartY) // 滑动的距离 \r\n        // #endif\r\n        if (this.limit) { // 是否开启高度限制\r\n          let nowTop = this.top + distance // 此次滑动的上拉框top值\r\n          if (nowTop < this.max || nowTop > this.min) {\r\n            // 如果滑动时上拉框top小于最大高度top就让上拉框top等于最大高度top\r\n            // 如果滑动时上拉框top大于最小高度top就让上拉框top等于最小高度top\r\n            this.top = nowTop < this.max ? this.max : this.min\r\n            this.distance = 0 // 滑动距离归零\r\n            // #ifdef APP-NVUE\r\n            this.touchStartY = e.touches[0].screenY // 此次滑动开始时的Y轴坐标\r\n            // #endif\r\n            // #ifndef APP-NVUE\r\n            this.touchStartY = e.touches[0].clientY // 此次滑动开始时的Y轴坐标\r\n            // #endif\r\n            return\r\n          }\r\n        }\n\t\t\t\t\n\t\t\t\tthis.distance = distance // 更新滑动距离\n      },\r\n      onTouchend(e) {\n        if (this.disable) return\n\t\t\t\t\r\n        this.top = this.top + this.distance // 更新上拉框top\n\t\t\t\t\r\n        if (this.auto) { // 是否开启自动复位\r\n          this.isTouchEnd = true // 开启滑动结束Flag\r\n          let time = (Date.now() - this.startTime) / 1000 // 滑动时间为 滑动结束时间 - 滑动开始时间\r\n          let speed = Math.abs(this.distance) / time // 滑动速度为 滑动距离/滑动时间\r\n          if (speed > 800) { // 如果速度大于800px/秒\r\n            this.top = this.distance > 0 ? this.min : this.max // 根据滑动方向设置top的值\r\n            // return this.distance = 0 // 滑动距离归零\r\n          } else {\r\n            if (this.top < this.boundary) this.top = this.max // 如果上拉框top小于分界线就让上拉框top等于最大高度top\r\n            else this.top = this.min // 如果上拉框top大于分界线就让上拉框top等于最小高度top\r\n          }\r\n        }\r\n        // 滑动结束时top信息\r\n        this.$emit('get-end-detail', {\r\n          minTop: this.min,\r\n          maxTop: this.max,\r\n          curTop: this.top\r\n        })\r\n        this.distance = 0 // 滑动距离归零\r\n      },\n\t\t\tmoveFunc(){\n\t\t\t\t// throttle(fn, cycle)\n\t\t\t}\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .com-hoc-touchbox {\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n  }\r\n\r\n  .touchend {\n    transition-property: top;\r\n    transition-duration: .9s;\n  }\r\n\r\n  .touchbox-content {\r\n    /* #ifdef APP-NVUE */\r\n    flex: 1;\r\n    /* #endif */\r\n    /* #ifndef APP-NVUE */\r\n    height: 100%;\r\n    /* #endif */\r\n    background-color: #fff;\r\n  }\r\n\r\n\r\n  .touch-line-box {\r\n    padding: 5px 0 10px;\r\n    /* #ifdef APP-NVUE */\r\n    align-items: center;\r\n    /* #endif */\r\n  }\r\n\r\n  .touch-line {\r\n    /* #ifndef APP-NVUE */\r\n    margin: 0 auto;\r\n    /* #endif */\r\n    width: 45px;\r\n    height: 5px;\r\n    border-radius: 25px;\r\n    background: rgba(51, 51, 51, 0.2);\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./com-hoc-touchbox.vue?vue&type=style&index=0&id=362313b8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./com-hoc-touchbox.vue?vue&type=style&index=0&id=362313b8&lang=scss&scoped=true&\""],"sourceRoot":""}