{"version":3,"sources":["webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/components/com-caritem.vue?081b","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/components/com-caritem.vue?6ec7","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/components/com-caritem.vue?a409","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/components/com-caritem.vue?673b","uni-app:///components/com-caritem.vue","webpack:////Users/zhangxinzhen/zxz/code/code-2021/uniapp/dsMiniUi2/components/com-caritem.vue?9092"],"names":["renderjs","component","options","__file","components","uButton","uIcon","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l0","_self","_c","__map","item","__i1__","$orig","__get_orig","g0","slice","g1","m0","calcDateLableArr","monArr","curIndex","l1","dateArr","d","__i2__","m1","calcIsWeekday","m2","calcMonLen","l2","getMonthBlock","_isMounted","e0","$event","h","_temp","arguments","length","currentTarget","dataset","_temp2","eventParams","onCheckHour","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,+TACIA,EADJ,wMASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,6BACZ,aAAAF,E;;;;2GCvBf,80C;;;;2GCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,QAAS,WACP,OAAO,sPAITC,MAAO,WACL,OAAO,2OAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAM,GAAG,SAASC,EAAMC,GACnC,IAAIC,EAAQV,EAAIW,WAAWH,GAEvBI,GAAM,KAAOJ,EAAO,GAAK,OAAOK,OAAO,GACvCC,GAAM,KAAON,EAAO,GAAK,OAAOK,OAAO,GAC3C,MAAO,CACLH,MAAOA,EACPE,GAAIA,EACJE,GAAIA,OAIJC,EAAKf,EAAIgB,iBAAiBhB,EAAIiB,OAAOjB,EAAIkB,WAEzCC,EAAKnB,EAAIO,MACXP,EAAIgB,iBAAiBhB,EAAIiB,OAAOjB,EAAIkB,WAAWE,SAC/C,SAASC,EAAGC,GACV,IAAIZ,EAAQV,EAAIW,WAAWU,GAEvBE,EAAKvB,EAAIwB,cAAcxB,EAAIiB,OAAOjB,EAAIkB,UAAY,IAAMG,EAAI,KAChE,MAAO,CACLX,MAAOA,EACPa,GAAIA,MAKNE,EAAKzB,EAAI0B,WAAW1B,EAAIiB,OAAOjB,EAAIkB,WACnCS,EAAK3B,EAAI4B,cAAc5B,EAAIiB,OAAOjB,EAAIkB,WAErClB,EAAI6B,aACP7B,EAAI8B,GAAK,SAASC,EAAQC,GACxB,IAAIC,EAAQC,UAAUA,UAAUC,OAAS,GAAGC,cAAcC,QACxDC,EAASL,EAAMM,aAAeN,EAAM,gBACpCD,EAAIM,EAAON,EAIb,OAAOhC,EAAIwC,YAAYR,KAI3BhC,EAAIyC,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLzC,GAAIA,EACJW,GAAIA,EACJI,GAAIA,EACJM,GAAIA,EACJE,GAAIA,MAKRmB,GAAmB,EACnBC,EAAkB,GACtBhD,EAAOiD,eAAgB,G;;;;2DC5FvB,+5BAAw2B,eAAG,G;;;;yMC0D32B,yBACA,+BACA,4B,uxDAEA,CACA,oBACA,OACA,QACA,QADA,WAEA,WAGA,aACA,QADA,WAEA,YAIA,KAdA,WAeA,OACA,WACA,6CACA,WACA,eACA,iBAGA,QAvBA,WAwBA,iBAEA,UACA,iBACA,2BACA,qDACA,6EACA,WAGA,SACA,SADA,WAEA,qCAEA,wCACA,2DAGA,kBARA,SAQA,KACA,0EACA,iCACA,aAEA,cAbA,SAaA,KACA,yBACA,mGACA,0HACA,KAEA,uBACA,MACA,wBACA,2HAOA,IAFA,sCAEA,aACA,sBACA,uGACA,mGACA,mBACA,WACA,4CACA,iBAKA,cAzCA,SAyCA,GACA,0BACA,2EACA,qBACA,8DACA,QAOA,8CAEA,iGACA,YAEA,WAGA,cA7DA,SA6DA,6IACA,eACA,iBAFA,SAGA,sEAHA,OAGA,EAHA,OAKA,SACA,8BACA,iBACA,cACA,gDATA,8CAYA,aAzEA,WA0EA,mBACA,mBAEA,YA7EA,WA8EA,yBACA,qBACA,qBACA,CACA,uBACA,qFACA,wBAGA,YAvFA,SAuFA,cACA,gCACA,8BACA,SACA,6BACA,0EAEA,iCACA,CACA,2CACA,sEAEA,sEACA,IACA,mBACA,kCACA,mCACA,MACA,MAEA,IACA,6BAGA,6BACA,0BACA,kCAEA,UACA,yBACA,mCACA,MACA,MAEA,IACA,6BAGA,8BACA,iDACA,iCAMA,UArIA,WAsIA,OACA,4CACA,6BACA,4BAEA,4BACA,cACA,4DACA,QACA,YADA,SACA,GACA,qCACA,kBAGA,QARA,SAQA,KAEA,2DAIA,mBA1JA,WA6JA,IAHA,WACA,gFACA,4GACA,aACA,6BAGA,qBAEA,aAnKA,WAoKA,mBACA,sBAGA,qBAxKA,WAwKA,gEACA,2BACA,4HACA,kCACA,mCACA,iBACA,mBAIA,qBAEA,WApLA,SAoLA,GACA,gDAEA,cAvLA,SAuLA,GACA,+CACA,YAEA,iBA3LA,SA2LA,GACA,yBACA,wDACA,+JACA,OACA,aACA,iB;;;;2DCjSA,ypDAA2mD,eAAG,G","file":"components/com-caritem.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./com-caritem.vue?vue&type=template&id=0b4d2da0&scoped=true&\"\nvar renderjs\nimport script from \"./com-caritem.vue?vue&type=script&lang=js&\"\nexport * from \"./com-caritem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./com-caritem.vue?vue&type=style&index=0&id=0b4d2da0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b4d2da0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/com-caritem.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./com-caritem.vue?vue&type=template&id=0b4d2da0&scoped=true&\"","var components\ntry {\n  components = {\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(8, function(item, __i1__) {\n    var $orig = _vm.__get_orig(item)\n\n    var g0 = (\"0\" + (item + 8) + \":00\").slice(-5)\n    var g1 = (\"0\" + (item + 9) + \":00\").slice(-5)\n    return {\n      $orig: $orig,\n      g0: g0,\n      g1: g1\n    }\n  })\n\n  var m0 = _vm.calcDateLableArr(_vm.monArr[_vm.curIndex])\n\n  var l1 = _vm.__map(\n    _vm.calcDateLableArr(_vm.monArr[_vm.curIndex]).dateArr,\n    function(d, __i2__) {\n      var $orig = _vm.__get_orig(d)\n\n      var m1 = _vm.calcIsWeekday(_vm.monArr[_vm.curIndex] + \" \" + d + \"日\")\n      return {\n        $orig: $orig,\n        m1: m1\n      }\n    }\n  )\n\n  var m2 = _vm.calcMonLen(_vm.monArr[_vm.curIndex])\n  var l2 = _vm.getMonthBlock(_vm.monArr[_vm.curIndex])\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event, h) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        h = _temp2.h\n\n      var _temp, _temp2\n\n      return _vm.onCheckHour(h)\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        m0: m0,\n        l1: l1,\n        m2: m2,\n        l2: l2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./com-caritem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./com-caritem.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"com-car-item\">\n\t\t<view class=\"title-line\">\n\t\t\t<text class=\"title-text\">{{itemId}}. {{initialData.vin || ''}}</text>\n\t\t\t<view class=\"tip-line-wrapper\">\n\t\t\t\t<view class=\"tip-line\">\n\t\t\t\t\t<view class=\"tip-item\" v-for=\"i in 1\" :key=\"i\">\n\t\t\t\t\t\t<view class=\"tip-title\">{{i===0?'可预约':'不可预约'}}</view>\n\t\t\t\t\t\t<view class=\"tip-color-item\" :style=\"{backgroundColor:i===0?'#9ff6cc':'#e8e8e8'}\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"content-wrapper\">\n\t\t\t<view class=\"func-line\">\n\t\t\t\t<view class=\"select-mon-box\">\n\t\t\t\t\t<view class=\"mon-select-icon-box\" @click=\"onFrontMonth\">\n\t\t\t\t\t\t<text class=\"custom-icon add-icon-style\" :style=\"{color:curIndex==0?'#808080':'#00f5d4'}\">&#xe600;</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"month-text\">{{monArr[curIndex]}}</view>\n\t\t\t\t\t<view class=\"mon-select-icon-box\" @click=\"onBackMonth\">\n\t\t\t\t\t\t<text class=\"custom-icon add-icon-style\"style=\"color: #00f5d4;\">&#xe626;</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"borrow-btn-box\">\n\t\t\t\t\t<u-button color=\"#00f5d4\" :customStyle=\"{padding:'0 30rpx'}\" text=\"预约\" shape=\"circle\" size=\"small\" @click=\"borrowCar\"><text class=\"custom-icon\" style=\"margin-right: 10rpx;\">&#xe679;</text> 预约</u-button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"time-table\">\n\t\t\t\t<view class=\"hour-lable-box\">\n\t\t\t\t\t<view class=\"hour-lable-item\" v-for=\"item in 8\" :key=\"item\">{{`0${item+8}:00`.slice(-5)}}~{{`0${item+9}:00`.slice(-5)}}</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"month-box\" @touchstart=\"onTouchstart\">\n\t\t\t\t\t<!-- <view class=\"date-line-box\" :style=\"{gridTemplateColumns: `repeat(${calcMonLen(monArr[curIndex])},1.8em)`}\">\n\t\t\t\t\t\t<text :class=\"['day-date',calcIsWeekday(`${monArr[curIndex]} ${d+1}日`)?'':'add-weekend-style']\" v-for=\"d in calcMonLen(monArr[curIndex])\" :key=\"d\">{{d+1}}</text>\n\t\t\t\t\t</view> -->\n\t\t\t\t\t<view class=\"date-line-box\" :style=\"{gridTemplateColumns: `repeat(${calcDateLableArr(monArr[curIndex]).len},1.8em)`}\">\n\t\t\t\t\t\t<text :class=\"['day-date',calcIsWeekday(`${monArr[curIndex]} ${d}日`)?'':'add-weekend-style']\" v-for=\"d in calcDateLableArr(monArr[curIndex]).dateArr\" :key=\"d\">{{d}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"hour-box\" :style=\"{gridTemplateColumns: `repeat(${calcMonLen(monArr[curIndex])},1.8em)`}\">\n\t\t\t\t\t\t<view @click=\"onCheckHour(h)\" :class=\"['hour-item',h.isChecked?('hour-checked-style'):(h.isAvailable?'green-bg':'grey-bg')]\" v-for=\"(h,ind) in getMonthBlock(monArr[curIndex])\" :key=\"ind\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t</view>\n\t\t\n\t\t<view class=\"checked-tip-box\">\n\t\t\t{{showH && showH.length>0?`已选择：${showH[0]} ~ ${showH[1]}`:''}}\n\t\t\t<u-icon v-if=\"showH && showH.length>0\" @click=\"onResetCheckedTime\" name=\"close-circle-fill\" color=\"#f55100\"></u-icon>\n\t\t</view>\t\n\t\t\n\t\t<view :class=\"['text-line',tipTextShow?'':'hide-tip-text']\"> 向右滑可看到更多 >> </view>\n\t</view>\n</template>\n\n<script>\n\timport moment from 'moment'\n\timport apiLib from '@/api/api.js'\n\timport {isNotNil, deepClone} from '@/lib/lib.js'\n\t\n\texport default {\n\t\tname:'com-car-item',\n\t\tprops:{\n\t\t\titemId:{ // caritem-id\n\t\t\t\tdefault(){\n\t\t\t\t\treturn 1\n\t\t\t\t}\n\t\t\t},\n\t\t\tinitialData:{\n\t\t\t\tdefault(){\n\t\t\t\t\treturn {}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcurIndex:0, // 当前展示月份的index\n\t\t\t\tmonArr:[moment().format('YYYY年 MM月')], // 展示的月份，默认首项是当月,如 ['2022年 02月']\n\t\t\t\thourArr:[],// 所有小时块\n\t\t\t\tcheckedHour:[], // 所选时间\n\t\t\t\ttipTextShow:true, // '向右滑可看到更多 >>'提示是否展示\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\t\t\tthis.initData()\n\t\t},\n\t\tcomputed: {\n      showH: function () {\n        const newValue = this.checkedHour || []\n        const arr = newValue.length>0?(newValue.length<2?([...newValue[0]]):([newValue[0][0],newValue[1][1]])):([])\n        const res = arr.map(i=>moment(i).format('YYYY-MM-DD HH:mm:ss'))\n\t\t\t\treturn res\n      }\n    },\n\t\tmethods: {\n\t\t\tinitData(){ // 初始化carItem数据\n        const list = this.initialData.orderList || []\n        \n        if(Object.keys(this.initialData).length>0){\n          this.generateHours(moment().format('YYYY年 MM月'),list)\n        }\n      },\n\t\t\tcalcWhetherOrderd(h,orderTimes){ // 判断当前小时块是否可预约 （1.预约时间段是否与订单已约时间重合，2.预约时间大于当前时间）\n        const isOrderd = orderTimes.some(t=>t && t[0] && t[1] && h[0]>=t[0] && h[1]<=t[1]) // true:不可预约\n        const isNotExpire = h[0]>moment().valueOf()// true:时间有效\n        return !isOrderd && isNotExpire\n      },\n\t\t\tgenerateHours(date,orderList){// 根据该月的orderList生成一个月的hour并push到hourArr中 (date:'2022年 03月')\n        const monLen = this.calcMonLen(date)\n        const ongoingStatus = ['BOOKING_WAIT','BOOKING_APPROVED','PICKUP_READY','PICKUP_DELAY','PICKUP_DONE','RETURN_TIMEOUT'] // 订单进行中状态值\n        const isOngoing = (i)=> ongoingStatus.some(s => i.orderProcesses && i.orderProcesses[0] && i.orderProcesses[0].status===s) // 把进行中的订单筛选出来\n        const orderTimes = [];\n\n        orderList.forEach(i=>{\n          if(isOngoing(i)){\n            if(!!i.startTime && !!i.endTime){\n              orderTimes.push([moment(i.startTime,'YYYY-MM-DD HH:mm').valueOf(),moment(i.endTime,'YYYY-MM-DD HH:mm').valueOf()])\n            }\n          }\n        })\n\n        const val = (i)=>i%8>0?i%8:8\n        \n        for(let d=1;d<=monLen;d++){\n          for(let i=1;i<=8;i++){\n            const timeL = moment(`${date} ${d}日 ${(val(i))+7}:00`,'YYYY-MM-DD HH:mm').valueOf()\n            const timeR = moment(`${date} ${d}日 ${(val(i))+8}:00`,'YYYY-MM-DD HH:mm').valueOf()\n            this.hourArr.push({\n              time:[timeL,timeR],\n              isAvailable:this.calcWhetherOrderd([timeL,timeR],orderTimes),\n              isChecked:false\n            })\n          }\n        }\n      },\n\t\t\tgetMonthBlock(date){ // 从hourArr中抓取某月的数据  (date:'2022年 03月')\n        if(this.hourArr.length>0){\n          const startTime = moment(`${date} 1日 08:00`,'YYYY-MM-DD HH:mm').valueOf()\n          const monLen = this.calcMonLen(date)\n          const startIndex = this.hourArr.findIndex(h=>h.time[0]===startTime)\n          const endIndex = startIndex+(monLen*8)\n\t\t\t\t\t// const data = deepClone(this.hourArr.slice(startIndex,endIndex));\n\t\t\t\t\t// data.forEach(i=>{\n\t\t\t\t\t// \t// 判断小时块所属日期是否是今天之前的日期\n\t\t\t\t\t// \ti.isBeforeToday = moment(i.time[0]).startOf('day').valueOf() < moment().startOf('day').valueOf()\n\t\t\t\t\t// })\n\t\t\t\t\t\n\t\t\t\t\tconst data = this.hourArr.slice(startIndex,endIndex).filter(i=>{\n\t\t\t\t\t\t// 判断小时块所属日期是否是今天之前的日期\n\t\t\t\t\t\tconst isBeforeToday = moment(i.time[0]).startOf('day').valueOf() < moment().startOf('day').valueOf()\n\t\t\t\t\t\treturn !isBeforeToday\n\t\t\t\t\t})\n          return data\n        } \n      },\n\t\t\tasync getOneMonList(nextMont){ // 根据车辆vin,year,month查询一个月的所有订单数据\n        const year = nextMont.slice(0,4)\n        const month = nextMont.slice(-3,-1)\n        const res = await apiLib.getOrderListByParam({vin:this.initialData.vin, year, month})\n\t\t\t\t\n\t\t\t\tif(res.isOk){\n\t\t\t\t\tthis.generateHours(nextMont,res.itemList)\n\t\t\t\t\tthis.monArr.push(nextMont)\n\t\t\t\t\tthis.curIndex+=1\n\t\t\t\t\tconsole.log(this.monArr,'this.monArr',this.curIndex)\n\t\t\t\t}\n      },\n\t\t\tonFrontMonth(){ // 查询上一个月\n\t\t\t\tif(this.curIndex==0) return\n\t\t\t\tthis.curIndex -= 1\n\t\t\t}, \n\t\t\tonBackMonth(){ // 查询下一个月，下一个月没有，则要获取数据\n\t\t\t\tconst monthArrLen = this.monArr.length\n\t\t\t\tif(this.curIndex < (monthArrLen-1)){\n\t\t\t\t\tthis.curIndex += 1\n\t\t\t\t}else{\n\t\t\t\t\tconst base = this.monArr[monthArrLen-1]\n\t        const nextMont = moment(moment(base,'YYYY-MM').add(1,'M').valueOf()).format('YYYY年 MM月')\n\t\t\t\t\tthis.getOneMonList(nextMont)\n\t\t\t\t}\n\t\t\t},\n\t\t\tonCheckHour(h){ // 选择借车时间 checkAble:true-可选\n        if(h.isAvailable && !h.isChecked){\n          const len = this.checkedHour.length\n          if(len==0){\n            this.checkedHour = [[...h.time]]\n            const index = this.hourArr.findIndex(i=>i.time[0]===h.time[0])\n            \n            this.hourArr[index].isChecked = true\n          }else{ // 第二个时间中间都是绿的，则都改为已选，若有灰的，则将最后一个绿的变黄\n            const indexArr = [...this.checkedHour].map(t=>{\n              return this.hourArr.findIndex(i=>i.time[0]===t[0])\n            })\n            const hIndex = this.hourArr.findIndex(i=>i.time[0]===h.time[0])\n            let endIndex = 0\n            if(hIndex>indexArr[indexArr.length-1]){ // 往右选\n              for(let j=indexArr[indexArr.length-1];j<=hIndex;j++){\n                if(this.hourArr[j].isAvailable==false){\n                  endIndex = j-1\n                  break\n                }else{\n                  endIndex = j\n                  this.hourArr[j].isChecked = true\n                }\n                \n                const t1 = [...this.checkedHour[0]]\n                const t2 = [...this.hourArr[endIndex].time]\n                this.checkedHour = [[...t1],[...t2]]\n              }\n            }else if(hIndex<indexArr[0]){ // 往左选\n              for(let k=indexArr[0];k>=hIndex;k--){\n                if(this.hourArr[k].isAvailable==false){\n                  endIndex = k+1\n                  break\n                }else{\n                  endIndex = k\n                  this.hourArr[k].isChecked = true\n                }\n\n                const t1 = [...this.hourArr[endIndex].time]\n                const t2 = [...this.checkedHour[this.checkedHour.length-1]]\n                this.checkedHour = [[...t1],[...t2]]\n              }\n            }\n          }\n        }\n      },\n\t\t\tborrowCar(){\n\t\t\t\tconst borrowFormData = {\n\t\t\t\t\tcheckedTime:deepClone(this.showH || []),\n\t\t\t\t\tvin:this.initialData.vin || '',\n\t\t\t\t\tid:this.initialData.id || ''\n\t\t\t\t}\n\t\t\t\tconst closeBorrowFormModal = this.closeBorrowFormModal\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl:'/page_carBorrow/borrowCar/borrowFormCom/borrowFormCom',\n\t\t\t\t\tevents:{\n\t\t\t\t\t\tgetFormData(data){\n\t\t\t\t\t\t\tconsole.log(data,'getFormData-caritem')\n\t\t\t\t\t\t\tcloseBorrowFormModal({...data.data})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tsuccess(res,self) {\n\t\t\t\t\t\t// 跳转成功后,向目标页面传送数据\n\t\t\t\t\t\tres.eventChannel.emit('pushInitData',{borrowFormData})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tonResetCheckedTime(){ // 重置选择，清空checkedHour\n        const startIndex = this.hourArr.findIndex(i=>i.time[0]===this.checkedHour[0][0])\n        const endIndex = this.checkedHour.length>1?(this.hourArr.findIndex(i=>i.time[0]===this.checkedHour[1][0])):startIndex\n        for(let j=startIndex;j<=endIndex;j++){\n          this.hourArr[j].isChecked = false\n        }\n\n        this.checkedHour=[]\n      },\n\t\t\tonTouchstart(){ // 监听滑动事件\n\t\t\t  if(this.tipTextShow){\n\t\t\t\t\tthis.tipTextShow = false\n\t\t\t\t}\n\t\t\t},\n\t\t\tcloseBorrowFormModal(formData={}){ // 预约成功后，将被预约的小时快置灰\n        if(formData.startTime && formData.endTime){\n          const checkedTime = [moment(formData.startTime,'YYYY-MM-DD HH:mm:ss').valueOf(),moment(formData.endTime,'YYYY-MM-DD HH:mm:ss').valueOf()]\n          this.hourArr.forEach(i=>{\n            if(i.time[0]>=checkedTime[0] && i.time[1]<=checkedTime[1]){\n              i.isAvailable = false\n              i.isChecked = false\n            }\n          })\n        }\n        this.checkedHour=[]\n      },\n\t\t\tcalcMonLen(date){ // 获取该月的天数，date:'2022年 02月'\n        return moment(date,'YYYY-MM').daysInMonth()\n      },\n\t\t\tcalcIsWeekday(date){ // date:'2022年 02月 d日' （返回结果是true: 是工作日）\n        const dayOfWeek = moment(date,'YYYY-MM-D').format('E')\n        return dayOfWeek<6 \n      },\n\t\t\tcalcDateLableArr(date){ //date:'2022年 02月', 计算日期栏数据（1，2，3，。。。。30）\n\t\t\t\tconst monLen = this.calcMonLen(date)\n\t\t\t\tconst dateArr = [...new Array(monLen).keys()].map(i=>i+1);\n\t\t\t\tconst filterArr = dateArr.filter(d=>moment(`${date} ${d}日`,'YYYY-MM-DD').startOf('day').valueOf() >= moment().startOf('day').valueOf())\n\t\t\t\treturn {\n\t\t\t\t\tlen:filterArr.length,\n\t\t\t\t\tdateArr:[...filterArr] // 例如：[28,29,30]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\t\n.com-car-item{\n\tpadding-bottom: 15rpx;\n\tmargin: 25rpx 0;\n\tborder-radius: 20rpx;\n\tbox-shadow: 0px 3px 11px 1px #d9dcd8;\n\tbackground: #fff;\n\t.title-line{\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 30rpx 20rpx;\n\t\tborder-radius: 20rpx 20rpx 0 0;\n\t\tbackground-color: #46de52;\n\t\tfont-size: 28rpx;\n\t\tcolor: #fff;\n\t\t.title-text{\n\t\t\tfont-size: 36rpx;\n\t\t}\n\t\t.tip-line-wrapper{\n\t\t\t.tip-line{\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-items: flex-end;\n\t\t\t\t.tip-item{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tmargin-left: 20rpx;\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t.tip-color-item{\n\t\t\t\t\t\twidth: 40rpx;\n\t\t\t\t\t\theight: 20rpx;\n\t\t\t\t\t\tmargin-left: 10rpx;\n\t\t\t\t\t\tborder-radius: 15rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.content-wrapper{\n\t\tpadding: 20rpx;\n\t\t.func-line{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\theight: 60rpx;\n\t\t\tmargin-bottom: 28rpx;\n\t\t\t.select-mon-box{\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\t.mon-select-icon-box{\n\t\t\t\t\tpadding: 0 10rpx;\n\t\t\t\t\t.add-icon-style{\n\t\t\t\t\t\tfont-size: 36rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.month-text{\n\t\t\t\t\tpadding-bottom: 6rpx;\n\t\t\t\t\tfont-size: 32rpx;\n\t\t\t\t\tcolor: #6b6b6b;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.borrow-btn-box{\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t.time-table{\n\t\t\tdisplay: flex;\n\t\t\tfont-size: 24rpx;\n\t\t\t.hour-lable-box{\n\t\t\t\tmargin-top: 2em;\n\t\t\t\tmargin-right: 20rpx;\n\t\t\t\tdisplay: grid;\n\t\t\t\tgrid-template-rows: repeat(8,0.8em);\n\t\t\t\tgrid-auto-flow: column;\n\t\t\t\tgrid-gap: 0.7em 0.9em;\n\t\t\t\tcolor: #a0a0a0;\n\t\t\t\t.hour-lable-item{\n\t\t\t\t\tpadding: 0 14rpx;\n\t\t\t\t\theight: 1.2em;\n\t\t\t\t\tline-height: 1.2em;\n\t\t\t\t\tborder-radius: 1em;\n\t\t\t\t\tbackground: #46de52;\n\t\t\t\t\tcolor: #fff;    \n\t\t\t\t}\n\t\t\t}\n\t\t\t.month-box{\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 100%;\n\t\t\t\tpadding-bottom: 1em;\n\t\t\t\toverflow: scroll;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\t.date-line-box{\n\t\t\t\t\tdisplay: grid;\n\t\t\t\t\tgrid-template-rows: repeat(1,1em);\n\t\t\t\t\tgrid-gap: 0.6em 0.9em;\n\t\t\t\t\tmargin-bottom:1em;\n\t\t\t\t\t.day-date{\n\t\t\t\t\t\tcolor: #8a8a8a;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t}\n\t\t\t\t\t.add-weekend-style{\n\t\t\t\t\t\tcolor:#d2d4d1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.hour-box{\n\t\t\t\t\tdisplay: grid;\n\t\t\t\t\tgrid-template-rows: repeat(8, 0.8em);\n\t\t\t\t\tgrid-auto-flow: column;\n\t\t\t\t\tgrid-gap: 0.7em 0.9em;\n\t\t\t\t\t.hour-item{\n\t\t\t\t\t\ttransform: translateY(0.15em);\n\t\t\t\t\t\tborder-radius:0.5em;\n\t\t\t\t\t\tbackground-color: #e8e8e8; //   6ef3b3c7  e8e8e8\n\t\t\t\t\t}\n\t\t\t\t\t.hour-checked-style{ // 选中时的样式\n\t\t\t\t\t\tbackground-color: #d1ff00;\n\t\t\t\t\t\ttransform: scale(1.15)\n\t\t\t\t\t}\n\t\t\t\t\t.green-bg{ // 可预约状态\n\t\t\t\t\t\tbackground-color: #6ef3b3c7;\n\t\t\t\t\t} \n\t\t\t\t\t.grey-bg{ // 不可预约状态\n\t\t\t\t\t\tbackground-color: #e8e8e8;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.checked-tip-box{\n\t\tdisplay: flex;\n\t\tfont-size: 24rpx;\n\t\tjustify-content: space-between;\n\t\tpadding: 0 20rpx 10rpx;\n\t\tcolor: #585858;\n\t}\n\t.text-line{\n\t\ttext-align: center;\n\t\tfont-size: 20rpx;\n\t\tcolor: #ababab;\n\t}\n\t.hide-tip-text{\n\t\ttransition: all ease-in-out 0.5s;\n\t\topacity: 0;\n\t}\n}\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./com-caritem.vue?vue&type=style&index=0&id=0b4d2da0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./com-caritem.vue?vue&type=style&index=0&id=0b4d2da0&lang=scss&scoped=true&\""],"sourceRoot":""}